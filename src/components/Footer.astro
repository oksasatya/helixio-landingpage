---
import { getLocale, t, getLocalizedPath } from '../i18n/utils';

const locale = getLocale(Astro.url.pathname);

const productLinks = [
  { label: t('nav.features', locale), href: getLocalizedPath('/features', locale) },
  { label: t('nav.pricing', locale), href: getLocalizedPath('/pricing', locale) },
  { label: t('nav.contact', locale), href: getLocalizedPath('/contact', locale) },
];

const featureLinks = [
  { label: 'Smart Notes', href: getLocalizedPath('/features/notes', locale) },
  { label: 'Kanban Board', href: getLocalizedPath('/features/kanban', locale) },
  { label: 'Calendar Sync', href: getLocalizedPath('/features/calendar', locale) },
  { label: 'AI Assistant', href: getLocalizedPath('/features/ai-assistant', locale) },
];

const legalLinks = [
  { label: t('footer.privacyPolicy', locale), href: getLocalizedPath('/privacy-policy', locale) },
  { label: t('footer.termsOfService', locale), href: getLocalizedPath('/terms-of-service', locale) },
];

const instagramUrl = import.meta.env.PUBLIC_INSTAGRAM_URL;
const whatsappNumber = import.meta.env.PUBLIC_NUMBER_WHATSAPP;
const whatsappUrl = whatsappNumber ? `https://wa.me/${whatsappNumber.replace(/^0/, '62')}` : '#';
---

<footer class="relative border-t border-border bg-background transition-colors gradient-border-top">
  <!-- Subtle noise-like pattern -->
  <div class="absolute inset-0 pointer-events-none pattern-dots opacity-30" aria-hidden="true"></div>
  <div class="section-container py-10! md:py-16!">
    <div class="grid grid-cols-2 md:grid-cols-5 gap-8 md:gap-8">
      <!-- Brand -->
      <div class="col-span-2 md:col-span-1">
        <a href={getLocalizedPath('/', locale)} class="inline-block mb-4">
          <img
            src="https://cdn.helixio.id/assets/img/public/logo.png"
            alt="Helixio"
            width="120"
            height="32"
            loading="lazy"
            class="h-8 w-auto"
          />
        </a>
        <p class="text-sm text-muted leading-relaxed">
          {t('footer.tagline', locale)}
        </p>
      </div>

      <!-- Product -->
      <div>
        <h4 class="font-semibold text-sm mb-4 text-foreground">
          {t('footer.product', locale)}
        </h4>
        <ul class="space-y-3">
          {productLinks.map(link => (
            <li>
              <a href={link.href} class="text-sm text-muted hover:text-primary transition-colors">
                {link.label}
              </a>
            </li>
          ))}
        </ul>
      </div>

      <!-- Features -->
      <div>
        <h4 class="font-semibold text-sm mb-4 text-foreground">
          {t('nav.features', locale)}
        </h4>
        <ul class="space-y-3">
          {featureLinks.map(link => (
            <li>
              <a href={link.href} class="text-sm text-muted hover:text-primary transition-colors">
                {link.label}
              </a>
            </li>
          ))}
        </ul>
      </div>

      <!-- Legal -->
      <div>
        <h4 class="font-semibold text-sm mb-4 text-foreground">
          {t('footer.legal', locale)}
        </h4>
        <ul class="space-y-3">
          {legalLinks.map(link => (
            <li>
              <a href={link.href} class="text-sm text-muted hover:text-primary transition-colors">
                {link.label}
              </a>
            </li>
          ))}
        </ul>
      </div>

      <!-- Social -->
      <div>
        <h4 class="font-semibold text-sm mb-4 text-foreground">
          {t('footer.followUs', locale)}
        </h4>
        <div class="flex gap-4">
          <a href={whatsappUrl} target="_blank" rel="noopener noreferrer" class="text-muted hover:text-primary transition-colors" aria-label="WhatsApp">
            <i class="fab fa-whatsapp text-lg"></i>
          </a>
          {instagramUrl && (
            <a href={instagramUrl} target="_blank" rel="noopener noreferrer" class="text-muted hover:text-primary transition-colors" aria-label="Instagram">
              <i class="fab fa-instagram text-lg"></i>
            </a>
          )}
        </div>
      </div>
    </div>

    <!-- Bottom bar -->
    <div class="mt-12 pt-8 border-t border-border">
      <p class="text-sm text-muted text-center">
        &copy; {new Date().getFullYear()} Helixio. {t('footer.rights', locale)}
      </p>
    </div>
  </div>
</footer>
